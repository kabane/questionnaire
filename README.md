# Hono + Prisma Boilerplate

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ [Hono](https://hono.dev/) ã‚’ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«ã€[Prisma](https://www.prisma.io/) ã‚’ORMã¨ã—ã¦ä½¿ç”¨ã—ãŸã€MySQLå¯¾å¿œã®TypeScriptãƒ™ãƒ¼ã‚¹ã®Webãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ç’°å¢ƒã§ã™ã€‚Dockerã§ç°¡å˜ã«ç«‹ã¡ä¸Šã’ã‚‰ã‚Œã‚‹ã‚ˆã†æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚

---

## ğŸš€ åˆå›ç’°å¢ƒæ§‹ç¯‰æ‰‹é †

### 1. å¿…è¦ãªä¾å­˜ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆåˆå›ã®ã¿ï¼‰

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ï¼š

```bash
npm install
```

### 2. TypeScript ãƒ“ãƒ«ãƒ‰ï¼ˆåˆå›ãƒ“ãƒ«ãƒ‰ or ã‚½ãƒ¼ã‚¹å¤‰æ›´æ™‚ï¼‰

```bash
npx tsc
```

â€» `dist/app.js` ãŒç”Ÿæˆã•ã‚Œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

### 3. Docker ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•

```bash
docker compose up -d
```

MySQL (`db`) ã¨ Node ã‚¢ãƒ—ãƒª (`app`) ãŒç«‹ã¡ä¸ŠãŒã‚Šã€`http://localhost:3001` ã§ã‚¢ãƒ—ãƒªã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚

---

## ğŸ“¦ ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®è¿½åŠ ãƒ»æ›´æ–°

### 1. Prisma ã‚¹ã‚­ãƒ¼ãƒã‚’ç·¨é›†

`prisma/schema.prisma` ã‚’ç·¨é›†ã—ã€ãƒ¢ãƒ‡ãƒ«ã®è¿½åŠ ã‚„å¤‰æ›´ã‚’è¡Œã„ã¾ã™ã€‚

ä¾‹ï¼š

```prisma
model Post {
  id      Int     @id @default(autoincrement())
  title   String
  content String?
}
```

### 2. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½œæˆ

```bash
docker compose exec app npx prisma migrate dev --name add-post
```

ã“ã‚Œã«ã‚ˆã‚Šã€`prisma/migrations` ãƒ•ã‚©ãƒ«ãƒ€ã«æ–°ã—ã„ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒä½œæˆã•ã‚Œã¾ã™ã€‚

### 3. Prisma Client ã®å†ç”Ÿæˆï¼ˆè‡ªå‹•ã§è¡Œã‚ã‚Œã¾ã™ãŒã€æ˜ç¤ºçš„ã«ã‚‚å¯èƒ½ï¼‰

```bash
docker compose exec app npx prisma generate
```

---

## ğŸ”„ ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œãƒ»ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ–¹æ³•

### âœ… ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®é©ç”¨ï¼ˆæœ¬ç•ªãƒ»èµ·å‹•æ™‚ç”¨ï¼‰

Docker ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•æ™‚ã€`npx prisma migrate deploy` ã«ã‚ˆã‚Šãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¯è‡ªå‹•ã§é©ç”¨ã•ã‚Œã¾ã™ã€‚

æ‰‹å‹•ã§å®Ÿè¡Œã™ã‚‹å ´åˆï¼š

```bash
docker compose exec app npx prisma migrate deploy
```

---

### ğŸ” ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆé–‹ç™ºä¸­ã®å·»ãæˆ»ã—ï¼‰

Prismaã§ã¯æ­£å¼ãªã€Œãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã€ã‚³ãƒãƒ³ãƒ‰ã¯æä¾›ã•ã‚Œã¦ã„ã¾ã›ã‚“ãŒã€ä»¥ä¸‹ã®æ–¹æ³•ã§å·»ãæˆ»ã—å¯èƒ½ã§ã™ã€‚

#### 1. æœ€æ–°ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ `RESET` ã™ã‚‹ï¼ˆå…¨å‰Šé™¤ + åˆæœŸåŒ–ï¼‰

```bash
docker compose exec app npx prisma migrate reset
```

> âš ï¸ ã“ã‚Œã«ã‚ˆã‚Š **ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ãŒå‰Šé™¤**ã•ã‚Œã¾ã™ã€‚é–‹ç™ºä¸­ã®ã¿å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

#### 2. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã—ã¦å†ä½œæˆ

```bash
rm -rf prisma/migrations
docker compose exec app npx prisma migrate dev --name new-init
```

---

### ğŸ›  é–‹ç™ºä¸­ã«ãŠã™ã™ã‚ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

1. `schema.prisma` ã‚’ç·¨é›†
2. `npx prisma migrate dev --name something`
3. å¿…è¦ã«å¿œã˜ã¦ `npx prisma migrate reset` ã§ã‚„ã‚Šç›´ã™
4. æœ€çµ‚çš„ã« `npx prisma migrate deploy` ã‚’å®Ÿè¡Œï¼ˆæœ¬ç•ªã‚’æƒ³å®šï¼‰

---
